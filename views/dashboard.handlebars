
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>CPSC213 Todo</title>
</head>
<body>


    <h1>Social todo app for cpsc213</h1>
    
    {{#if errors}}
    {{#each errors}}
    <div class="errors">
        {{this.msg}}
    </div>
    {{/each}}
    {{/if}}


    <h2 class="welcome">Welcome, {{name}}</h2>
    
    {{#if my_tasks}}
    {{#each my_tasks}}
    <div>
        <h4>Your Tasks</h4>

            <ul class="tasks">
                <li class="task">
                  <span class="task-title">{{this.name}}</span>
                    <form method="post" action="/api/task/{{this._id}}/delete">
                      <input type="submit" name="delete" class="delete" value="delete">
                    </form>
                  <form method="post" action="/api/task/{{this._id}}/completed">
                    <input type="submit" name="toggle" class="toggle" value="Mark {{#if this.completed}}
                  not complete
                  {{else}}
                  complete
                  {{/if}}">
                  </form>
                  {{#if this.completed}}
                  complete
                  {{else}}
                  not complete
                  {{/if}}
                  <p class="description">Description: {{this.description}}</p>
                </li>
            </ul>
    </div>
    {{/each}}
    {{else}}
    <h1>No tasks</h1>
    {{/if}}
    
    {{#if shared_tasks}}
    {{#each shared_tasks}}
    <div>
        <h4>Shared Tasks</h4>

            <ul class="tasks">
                <li class="task">
                  <span class="task-title">{{this.name}}</span>
                    <form method="post" action="/api/task/{{this._id}}/delete">
                      <input type="submit" name="delete" class="delete" value="delete">
                    </form>
                  <form method="post" action="/api/task/{{this._id}}/completed">
                    <input type="submit" name="toggle" class="toggle" value="Mark {{#if this.completed}}
                  not complete
                  {{else}}
                  complete
                  {{/if}}">
                  </form>
                  {{#if this.completed}}
                  complete
                  {{else}}
                  not complete
                  {{/if}}
                  <p class="description">Description: {{this.description}}</p>
                </li>
            </ul>
    </div>
    {{/each}}
    {{else}}
    <h1>No tasks</h1>
    {{/if}}
    
    <hr>
    <div>
        <h4>Add a new task</h4>
        <form class="createTask" action="/api/task/create" method="POST">
            <label for="name">Task name</label>
            <input name="name" type="text"><br>
            <label for="description">Task Description</label>
            <input name="description" type="text"><br>
            Collaborators<br>
            <input name="collaborator1" type="email"><br>
            <input name="collaborator2" type="email"><br>
            <input name="collaborator3" type="email"><br>
            <input type="submit" class="create-task-submit">
        </form>
    </div>
